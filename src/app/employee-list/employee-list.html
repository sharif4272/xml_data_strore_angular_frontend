<div class="container my-4">

  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2 class="mb-0">Employees</h2>
    <button (click)="addNewEmployee()" class="btn btn-primary">
      <i class="bi bi-person-plus"></i> Add Employee
    </button>
  </div>

  <div class="card shadow-sm mb-4">
    <div class="card-body">
      <h5 class="card-title">XML File Upload</h5>
      <div class="d-flex gap-2">
        <input type="file" class="form-control" (change)="onFileSelected($event)" accept=".xml"/>
      </div>
    </div>
  </div>

  @if (message && message.includes('Upload')) {
    <div class="alert alert-success">{{ message }}</div>
  }

  @if (message && !message.includes('Upload')) {
    <div class="alert alert-info">{{ message }}</div>
  }


  <div class="table-responsive">
    <table class="table table-striped table-hover align-middle shadow-sm">
      <thead class="table-dark">
      <tr>
        <th scope="col">ID</th>
        <th scope="col">Name</th>
        <th scope="col">Division</th>
        <th scope="col">Building</th>
        <th scope="col">Title</th>
        <th scope="col">Room</th>
        <th scope="col" class="text-center">Actions</th>
      </tr>
      </thead>
      <tbody>
        @for (emp of paginatedEmployees; track emp.id; let i = $index) {
          <tr>
            <td>{{ (currentPage - 1) * pageSize + i + 1 }}</td>
            <td>{{ emp.firstName }} {{ emp.lastName }}</td>
            <td>{{ emp.division }}</td>
            <td>{{ emp.building }}</td>
            <td>{{ emp.title }}</td>
            <td>{{ emp.room }}</td>
            <td class="text-center">
              <div class="btn-group btn-group-sm" role="group">
                <button (click)="editEmployee(emp.id!)" class="btn btn-warning">
                  <i class="bi bi-pencil"></i> Edit
                </button>
                <button (click)="deleteEmployee(emp.id!)" class="btn btn-danger">
                  <i class="bi bi-trash"></i> Delete
                </button>
                <button (click)="viewEmployee(emp.id!)" class="btn btn-info text-white">
                  <i class="bi bi-eye"></i> View
                </button>
              </div>
            </td>
          </tr>
        } @empty {
          <tr>
            <td colspan="7">
              <div class="alert alert-warning text-center">
                <i class="bi bi-exclamation-triangle"></i> No Employee found!
              </div>
            </td>
          </tr>
        }
      </tbody>
    </table>
  </div>

  <!-- Pagination Controls -->
  <div class="d-flex justify-content-between align-items-center mt-3 px-2">
    <small class="text-muted">
      Showing {{ (currentPage - 1) * pageSize + 1 }} to
      {{ Math.min(currentPage * pageSize, employees.length) }} of
      {{ employees.length }} employees
    </small>

    <nav aria-label="Employee pagination">
      <ul class="pagination mb-0">
        <!-- Previous Button -->
        <li class="page-item" [class.disabled]="currentPage === 1">
          <button class="page-link" (click)="prevPage()" aria-label="Previous">
            <span aria-hidden="true">&laquo;</span>
          </button>
        </li>

        <!-- Page Numbers -->
        @for (page of getPageNumbers(); track $index) {
          <li class="page-item" [class.active]="page === currentPage">
            <button class="page-link" (click)="goToPage(page)">
              {{ page }}
            </button>
          </li>
        }

        <!-- Next Button -->
        <li class="page-item" [class.disabled]="currentPage === totalPages">
          <button class="page-link" (click)="nextPage()" aria-label="Next">
            <span aria-hidden="true">&raquo;</span>
          </button>
        </li>
      </ul>
    </nav>
  </div>

</div>

